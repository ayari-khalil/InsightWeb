{% extends 'back.html.twig' %}

{% block title %}Ecole index{% endblock %}

{% block body %}
    <h1>Ecole index</h1>

    <div class="col-lg-6 mb-3">
    <form method="GET" action="{{ path('app_ecole_index') }}">
        <select id="filterOption" name="sortBy" class="btn btn-primary btn-sm">
            <option value="nom" {% if app.request.query.get('sortBy') == 'nom' %}selected{% endif %}>Nom</option>
            <option value="id" {% if app.request.query.get('sortBy') == 'id' %}selected{% endif %}>ID</option>
            <option value="nb_professeur" {% if app.request.query.get('sortBy') == 'nb_professeur' %}selected{% endif %}>Nombre de professeurs</option>
        </select>
    </form>
</div>

    
    <script>
        // Lorsque l'option est modifi√©e, soumettre le formulaire
        document.getElementById('filterOption').addEventListener('change', function() {
            this.form.submit();
        });
    </script><br>
    
    <div class="col-lg-6 mb-3">
        <form class="search-form" action="{{ path('app_Ecole_Home') }}" method="GET">
            <div class="input-group">
                <input class="form-control" type="search" name="search" placeholder="rechercher par Nom ...">
                <button class="btn btn-primary" type="submit">Rechercher</button>
            </div>
        </form>
    </div>
    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Nom</th>
                <th>Adresse</th>
                <th>Nb_professeur</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for ecole in ecoles %}
            <tr>
                <td>{{ ecole.id }}</td>
                <td>{{ ecole.nom }}</td>
                <td>{{ ecole.adresse }}</td>
                <td>{{ ecole.nbProfesseur }}</td>
                <td>
                    <a href="{{ path('app_ecole_show', {'id': ecole.id}) }}" class="btn btn-primary btn-sm">show</a>
                    <a href="{{ path('app_ecole_edit', {'id': ecole.id}) }}" class="btn btn-danger btn-sm delete-button">edit</a>
                    <a href="{{ path('map', {'id': ecole.id}) }}" class="btn btn-danger btn-sm delete-button">open in map</a>

                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="5">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="text-center">
                <a href="{{ path('app_ecole_new') }}" class="btn btn-primary">Create new</a>
            </div>
        </div>
    </div>
{% endblock %}
